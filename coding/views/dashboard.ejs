<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="/dashboardStyle.css" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
    <title>Dashboard</title>
</head>

<body>

    <div class="navbar">
        <ul>
            <a href="/">
                <li class="nav--title">BOOKIFY</li>
            </a>
            <a href="/profile">
                <li class="nav--small"><i class="fa fa-user-circle" style="margin-right:5px;"></i><%= username %></li>
            </a>
        </ul>
    </div>

    <% var finished=0, unfinished=0, notstarted=0; %>
    <% for( var i = 0; i<=length-1; i++) { %>
    <% if(result[i].book_progress==0) { %>
    <% notstarted++; } %>
    <% if(result[i].book_progress>=1 && result[i].book_progress<=99) { %>
    <% unfinished++; } %>
    <% if(result[i].book_progress==100) { %>
    <% finished++; } %>
    <% } %>

    <div class="header">Finished</div>
    <div class="count"><%= finished %></div>
    <div class="minimize minimize-1" id="minimize-1"><i class="fa fa-angle-up" id="icon-1" onclick="minimize(1)"
            aria-hidden="true"></i>
    </div>
    <hr class="categoryHr">
    <div class="bookArea finished area-1">
        <% for( var i = 0; i<=length-1; i++) { %>
        <% if(result[i].book_progress==100) { %>
        <a href="/book?id=<%=result[i].book_id%>">
            <div class="book">
                <div class="book--title"><%= result[i].book_title %></div>
                <div class="book--author">by <%= result[i].book_author %></div>
                <div class="book--category">Category: <%= result[i].book_category %></div>
            </div>
        </a>
        <% } %>
        <% } %>

    </div>

    <div class="header">On going</div>
    <div class="count"><%= unfinished %></div>
    <div class="minimize minimize-2" onclick="minimize(2)"><i class="fa fa-angle-up" id="icon-2" aria-hidden="true"></i>
    </div>
    <hr class="categoryHr">
    <div class="bookArea onGoing area-2">
        <% for( var i = 0; i<=length-1; i++) { %>
        <% if(result[i].book_progress>=1 && result[i].book_progress<=99) { %>
        <a href="/book?id=<%=result[i].book_id%>">
            <div class="book">
                <div class="book--title"><%= result[i].book_title %></div>
                <div class="book--author">by <%= result[i].book_author %></div>
                <div class="book--category">Category: <%= result[i].book_category %></div>
                <div class="book--progress"><%= result[i].book_progress %>%</div>
            </div>
        </a>
        <% } %>
        <% } %>
    </div>



    <div class="header">Not Started</div>
    <div class="count"><%= notstarted %></div>
    <div class="minimize minimize-3" onclick="minimize(3)"><i class="fa fa-angle-up" id="icon-3"
            onkeypress="minimize(3)" aria-hidden="true"></i>
    </div>
    <hr class="categoryHr">
    <div class="bookArea notStarted area-3">
        <% for( var i = 0; i<=length-1; i++) { %>
        <% if(result[i].book_progress==0) { %>
        <a href="/book?id=<%=result[i].book_id%>">
            <div class="book">
                <div class="book--title"><%= result[i].book_title %></div>
                <div class="book--author">by <%= result[i].book_author %></div>
                <div class="book--category">Category: <%= result[i].book_category %></div>
            </div>
        </a>
        <% } %>
        <% } %>
    </div>



    <a href='/dashboard/add_book'><button class="add_button" type="submit" placeholder="Add Book">Add Book
        </button>

        <script>

            function minimize(number) {
                if (document.querySelector('.area-' + number).clientHeight !== 0)
                    document.querySelector('.area-' + number).style.height = "0px";
                else
                    document.querySelector('.area-' + number).style.height = "initial";

                if (document.getElementById('icon-' + number).className == "fa fa-angle-up")
                    document.getElementById('icon-' + number).className = "fa fa-angle-down";
                else
                    document.getElementById('icon-' + number).className = "fa fa-angle-up";
            }

        </script>
</body>

</html>